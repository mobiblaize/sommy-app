function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{kahe:function(e,t,n){"use strict";n.r(t),n.d(t,"PostModule",(function(){return C}));var r=n("ofXK"),o=n("tyNb"),i=n("Rpy1"),s=n("tk/3"),a=n("fXoL"),l=n("zM63"),c=n("4XAN"),d=n("sriv"),m=n("3Pt+");function p(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",20),a["\u0275\u0275elementStart"](1,"div",21),a["\u0275\u0275text"](2),a["\u0275\u0275elementStart"](3,"div",22),a["\u0275\u0275elementStart"](4,"button",23),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeOldFile(e)})),a["\u0275\u0275text"](5,"Remove"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",24),a["\u0275\u0275element"](7,"img",25),a["\u0275\u0275element"](8,"br"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=t.index,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",r," "),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate1"]("src","../../../assets/posts/",i.post.images[o],"",a["\u0275\u0275sanitizeUrl"])}}function u(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",20),a["\u0275\u0275elementStart"](1,"div",21),a["\u0275\u0275text"](2),a["\u0275\u0275elementStart"](3,"div",22),a["\u0275\u0275elementStart"](4,"button",23),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeFile(e)})),a["\u0275\u0275text"](5,"Remove"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",24),a["\u0275\u0275element"](7,"img",26),a["\u0275\u0275element"](8,"br"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=t.index,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",r.name," "),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("src",i.images[o],a["\u0275\u0275sanitizeUrl"])}}var f,g=function(e){return{width:e}},h=((f=function(){function e(t,n,r,o,i){_classCallCheck(this,e),this.progress=t,this.route=n,this.router=r,this.authService=o,this.flashMessage=i,this.post={title:"",body:"",images:[]},this.multipleImages=[],this.images=[],this.completion=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.progressRef=this.progress.ref("myProgress"),this.route.paramMap.subscribe((function(t){var n={id:t.get("id")};e.authService.getPost(n).subscribe((function(t){e.post=t.post}),(function(t){if(console.log(t),t instanceof s.d){if(404!==t.status)return e.flashMessage.show("An error occured try again later",{cssClass:"alert-danger mb-0",timeout:3e3});e.flashMessage.show(t.error.message,{cssClass:"alert-danger mb-0",timeout:3e3}),e.router.navigate(["/admin/posts"])}}))}))}},{key:"onSelect",value:function(e){var t=this;if(e.target.files.length>0){for(var n=0,r=e.target.files.length;n<r;n++)this.multipleImages.push(e.target.files[n]);this.images=[],Array.from(this.multipleImages).forEach((function(e,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){t.images[n]=e.target.result}}))}}},{key:"removeFile",value:function(e){this.multipleImages=this.multipleImages.filter((function(t,n){return n!==e})),this.images.splice(e,1)}},{key:"removeOldFile",value:function(e){this.post.images.splice(e,1)}},{key:"onSubmit",value:function(e){var t=this;e.disabled=!0,this.progressRef.start(),this.completion=0;var n,r=new FormData,o=_createForOfIteratorHelper(this.multipleImages);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.append("files",i)}}catch(d){o.e(d)}finally{o.f()}r.append("id",this.post._id.toString()),r.append("title",this.post.title.toString()),r.append("body",this.post.body.toString());var a,l=_createForOfIteratorHelper(this.post.images);try{for(l.s();!(a=l.n()).done;){var c=a.value;r.append("images",c.toString())}}catch(d){l.e(d)}finally{l.f()}this.authService.editPost(r).subscribe((function(n){n.type==s.e.UploadProgress?(t.completion=Math.round(n.loaded/n.total*100),console.log("upload progress: "+Math.round(n.loaded/n.total*100)+" %")):n.type==s.e.Response&&(t.flashMessage.show(n.body.message,{cssClass:"alert-success mb-0",timeout:3e3}),t.progressRef.complete(),e.disabled=!1)}),(function(n){if(console.log(n),t.completion=0,t.progressRef.complete(),e.disabled=!1,n instanceof s.d){if(501===n.status)return t.flashMessage.show(n.error.error.message,{cssClass:"alert-danger mb-0",timeout:3e3});if(404!==n.status)return t.flashMessage.show("An error occured try again later",{cssClass:"alert-danger mb-0",timeout:3e3});t.flashMessage.show(n.error.message,{cssClass:"alert-danger mb-0",timeout:3e3}),t.router.navigate(["/admin"])}}))}}]),e}()).\u0275fac=function(e){return new(e||f)(a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](o.f),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](d.FlashMessagesService))},f.\u0275cmp=a["\u0275\u0275defineComponent"]({type:f,selectors:[["app-edit-post"]],decls:32,vars:7,consts:[[1,"row","edit-post"],[1,"col-md-2"],[1,"col-md-8"],[1,"row","card"],[1,"col-sm-12"],["routerLink","/admin/posts",1,"btn","btn-lg","btn-link","float-right","nav-link"],["class","row uploadList",4,"ngFor","ngForOf"],["id","fileSelector"],["name","myFiles","id","myFiles","multiple","","type","file",1,"d-none",3,"change"],["chooseFile",""],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"form-group","mt-2"],["type","text","name","title","placeholder","Post title",3,"ngModel","ngModelChange"],[1,"form-group"],["name","message","placeholder","Post body","rows","4",3,"ngModel","ngModelChange"],[1,"progress","mb-2"],[1,"progress-bar","bg-success",3,"ngStyle"],[1,"row"],["type","button",1,"btn","btn-primary",3,"click"],["editPost",""],[1,"row","uploadList"],[1,"col-sm-4"],[1,"col-sm-4","pb-2","pt-1"],["type","button",1,"btn","btn-danger",3,"click"],[1,"col-sm-8"],[1,"img-fluid",3,"src"],[1,"img-thumbnail",3,"src"]],template:function(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275element"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"div",4),a["\u0275\u0275elementStart"](5,"h4"),a["\u0275\u0275text"](6,"Edit Post"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",5),a["\u0275\u0275text"](8,"My Posts"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div"),a["\u0275\u0275template"](10,p,9,2,"div",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div"),a["\u0275\u0275template"](12,u,9,2,"div",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"input",8,9),a["\u0275\u0275listener"]("change",(function(e){return t.onSelect(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"button",10),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275reference"](15).click()})),a["\u0275\u0275text"](17,"Add Images"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",11),a["\u0275\u0275elementStart"](19,"label"),a["\u0275\u0275text"](20,"Post title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"input",12),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.post.title=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",13),a["\u0275\u0275elementStart"](23,"label"),a["\u0275\u0275text"](24,"Body"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"textarea",14),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.post.body=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",15),a["\u0275\u0275element"](27,"div",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",17),a["\u0275\u0275elementStart"](29,"button",18,19),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275reference"](30);return t.onSubmit(e)})),a["\u0275\u0275text"](31,"Update Post"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&(a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngForOf",t.post.images),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.multipleImages),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngModel",t.post.title),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngModel",t.post.body),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](5,g,t.completion+"%")))},directives:[o.g,r.NgForOf,m.b,m.h,m.k,r.NgStyle],styles:[".edit-post[_ngcontent-%COMP%]{background-color:#f4f4f4}.header-section[_ngcontent-%COMP%]{height:80px;line-height:80px;color:beige;background-color:#2e2b2b;font-size:24px;padding-left:20px}.card[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);color:#000;margin:20px;padding:10px}.uploadList[_ngcontent-%COMP%]{padding:10px;margin-top:10px;margin-bottom:10px}"]}),f);function v(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",4),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"h3"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"p"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",6),a["\u0275\u0275elementStart"](7,"button",7,8),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit,r=a["\u0275\u0275reference"](8);return a["\u0275\u0275nextContext"]().editPost(e,r)})),a["\u0275\u0275text"](9,"Edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"button",9,10),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.index,r=a["\u0275\u0275reference"](11);return a["\u0275\u0275nextContext"]().deletePost(e,r)})),a["\u0275\u0275text"](12,"Delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](r.title),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](r.body)}}var b,y,x,S=[{path:"",component:(b=function(){function e(t,n,r,o){_classCallCheck(this,e),this.progress=t,this.authService=n,this.router=r,this.flashMessage=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.progressRef=this.progress.ref("myProgress"),this.authService.getPosts().subscribe((function(t){e.posts=t.posts}),(function(e){console.log(e)}))}},{key:"editPost",value:function(e,t){t.disabled=!0,this.router.navigate(["/admin/posts",e._id])}},{key:"deletePost",value:function(e,t){var n=this,r=this.posts[e];t.disabled=!0,this.progressRef.start(),this.authService.deletePost(r).subscribe((function(r){n.flashMessage.show(r.message,{cssClass:"alert-success",timeout:3e3}),n.posts.splice(e,1),n.progressRef.complete(),t.disabled=!1}),(function(e){if(console.log(e),n.progressRef.complete(),t.disabled=!1,e instanceof s.d)return 501===e.status?n.flashMessage.show(e.error.message,{cssClass:"alert-danger",timeout:3e3}):n.flashMessage.show(404===e.status?e.error.message:"An error occured try again later",{cssClass:"alert-danger mb-0",timeout:3e3})}))}}]),e}(),b.\u0275fac=function(e){return new(e||b)(a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.f),a["\u0275\u0275directiveInject"](d.FlashMessagesService))},b.\u0275cmp=a["\u0275\u0275defineComponent"]({type:b,selectors:[["app-posts"]],decls:5,vars:1,consts:[[1,"section-posts"],[1,"container"],[1,"pt-5"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"mt-3"],[1,"row"],[1,"ml-2","float-right","btn","btn-sm","btn-full","btn-primary",3,"click"],["editBtn",""],[1,"ml-2","float-right","btn","btn-sm","btn-full","btn-secondary",3,"click"],["deleteBtn",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"My Posts"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,v,13,2,"div",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",t.posts))},directives:[r.NgForOf],styles:[".section-posts[_ngcontent-%COMP%]{min-height:100vh;background-color:#f4f4f4}.header-section[_ngcontent-%COMP%]{height:80px;line-height:80px;color:beige;background-color:#2e2b2b;font-size:24px;padding-left:20px}.card[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);color:#000;margin:20px;padding:10px}"]}),b)},{path:":id",component:h}],w=((x=function e(){_classCallCheck(this,e)}).\u0275mod=a["\u0275\u0275defineNgModule"]({type:x}),x.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||x)},providers:[i.a],imports:[[o.j.forChild(S)],o.j]}),x),C=((y=function e(){_classCallCheck(this,e)}).\u0275mod=a["\u0275\u0275defineNgModule"]({type:y}),y.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||y)},imports:[[r.CommonModule,m.g,w]]}),y)}}]);